[tools]
flutter = "3.35"
python = "3.13"

[tasks]
bootstrap = { run = [
    "cd backend && uv sync",
    "cd frontend/survivor_pool && flutter pub get",
], description = "Install all project dependencies" }

"dev:backend" = { run = [
    "cd backend && uv run uvicorn src.main:app --reload --host 0.0.0.0 --port 8000",
], description = "Start backend server" }

"dev:frontend" = { run = [
    "cd frontend/survivor_pool && flutter run -d 'iPhone 17 Pro Max'",
], description = "Start frontend server" }

"dev:mongo" = { run = [
    "docker run --rm --name dev-mongo -d -p 27017:27017 -v dev-mongo-data:/data/db -v $(pwd)/db/init:/docker-entrypoint-initdb.d:ro mongo:8.0",
    "docker logs -f dev-mongo",
], description = "Start MongoDB for development" }

prod = { run = [
    "docker compose up -d",
], description = "Start production services" }
